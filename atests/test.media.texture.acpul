### 5400 test.media.texture

r0:=k==0;

draw(r0, 5401);

_ @1010;
_ @sys.media;

tex r8;

if (r0) {
 pool 5400;
 id 0;
 i 0;
 tex:=media.video.recorder.texture(r0, pool,id,i, 0, 640,480);
};

k:=1;

### 5401 test.media.texture.draw

color(u0, 1,0,0,1);
x0 0+50*_0;
y0 0+50*_0;
x1 50+50*_0;
y1 50+50*_0+rnd(u0)*50;
x2 100+50*_0;
y2 0+50*_0;
n 0;m 0;triangle(u0, 6, x0(n),y0(m), x1(n),y1(m), x2(n),y2(m));
n 1;m 1;triangle(u0, 6, x0(n),y0(m), x1(n),y1(m), x2(n),y2(m));
n 2;m 0;triangle(u0, 6, x0(n),y0(m), x1(n),y1(m), x2(n),y2(m));

n 3;m 0;triangle(u0, 6, x0(n),y0(m), x1(n),y1(m), x2(n),y2(m));
n 4;m 1;triangle(u0, 6, x0(n),y0(m), x1(n),y1(m), x2(n),y2(m));
n 5;m 0;triangle(u0, 6, x0(n),y0(m), x1(n),y1(m), x2(n),y2(m));

n 2.5;m 1.7;triangle(u0, 6, x0(n),y0(m), x1(n),y1(m), x2(n),y2(m));

_ @1010;
_ @sys.node;

tex r8;
node.ex.gl.fbo(u0, tex);

node.ex.gl.clear(r0, rnd(u0),rnd(u0),rnd(u0),1);  

node.ex.gl.fbo(u0, -1);
